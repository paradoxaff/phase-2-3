# API Contract: Todo Full-Stack Web Application

## Overview
REST API for managing user authentication and task management with JWT-based security.

## Base URL
`https://api.todo-app.com/v1` (production)
`http://localhost:8000/v1` (development)

## Authentication
All endpoints (except auth endpoints) require JWT authentication via Authorization header:
```
Authorization: Bearer <jwt_token>
```

## Common Responses

### Success Response
```json
{
  "success": true,
  "data": {}
}
```

### Error Response
```json
{
  "success": false,
  "error": {
    "code": "ERROR_CODE",
    "message": "Human-readable error message",
    "details": {}
  }
}
```

## Endpoints

### Authentication

#### POST /auth/register
Register a new user account.

##### Request
```json
{
  "email": "user@example.com",
  "password": "secure_password_123"
}
```

##### Response (201 Created)
```json
{
  "success": true,
  "data": {
    "user": {
      "id": "uuid-string",
      "email": "user@example.com",
      "createdAt": "2023-01-01T00:00:00Z"
    },
    "token": "jwt-token-string"
  }
}
```

##### Validation Errors (400 Bad Request)
- Email format invalid
- Password too weak
- Email already exists

#### POST /auth/login
Authenticate user and return JWT token.

##### Request
```json
{
  "email": "user@example.com",
  "password": "secure_password_123"
}
```

##### Response (200 OK)
```json
{
  "success": true,
  "data": {
    "user": {
      "id": "uuid-string",
      "email": "user@example.com",
      "createdAt": "2023-01-01T00:00:00Z"
    },
    "token": "jwt-token-string"
  }
}
```

##### Authentication Error (401 Unauthorized)
- Invalid credentials

### Task Management

#### GET /tasks
Retrieve all tasks for the authenticated user.

##### Query Parameters
- `limit`: Number of tasks to return (default: 50, max: 100)
- `offset`: Number of tasks to skip (default: 0)
- `completed`: Filter by completion status (optional: true/false)

##### Response (200 OK)
```json
{
  "success": true,
  "data": {
    "tasks": [
      {
        "id": "uuid-string",
        "title": "Sample task",
        "description": "Optional description",
        "completed": false,
        "userId": "user-uuid-string",
        "createdAt": "2023-01-01T00:00:00Z",
        "updatedAt": "2023-01-01T00:00:00Z"
      }
    ],
    "pagination": {
      "limit": 50,
      "offset": 0,
      "total": 1
    }
  }
}
```

#### POST /tasks
Create a new task for the authenticated user.

##### Request
```json
{
  "title": "New task title",
  "description": "Optional description of the task"
}
```

##### Response (201 Created)
```json
{
  "success": true,
  "data": {
    "task": {
      "id": "uuid-string",
      "title": "New task title",
      "description": "Optional description of the task",
      "completed": false,
      "userId": "user-uuid-string",
      "createdAt": "2023-01-01T00:00:00Z",
      "updatedAt": "2023-01-01T00:00:00Z"
    }
  }
}
```

#### GET /tasks/{id}
Retrieve a specific task by ID.

##### Response (200 OK)
```json
{
  "success": true,
  "data": {
    "task": {
      "id": "uuid-string",
      "title": "Task title",
      "description": "Task description",
      "completed": false,
      "userId": "user-uuid-string",
      "createdAt": "2023-01-01T00:00:00Z",
      "updatedAt": "2023-01-01T00:00:00Z"
    }
  }
}
```

##### Not Found (404)
- Task does not exist or does not belong to user

#### PUT /tasks/{id}
Update an existing task.

##### Request
```json
{
  "title": "Updated task title",
  "description": "Updated description",
  "completed": true
}
```

##### Response (200 OK)
```json
{
  "success": true,
  "data": {
    "task": {
      "id": "uuid-string",
      "title": "Updated task title",
      "description": "Updated description",
      "completed": true,
      "userId": "user-uuid-string",
      "createdAt": "2023-01-01T00:00:00Z",
      "updatedAt": "2023-01-02T00:00:00Z"
    }
  }
}
```

#### PATCH /tasks/{id}/complete
Toggle the completion status of a task.

##### Request
```json
{
  "completed": true
}
```

##### Response (200 OK)
```json
{
  "success": true,
  "data": {
    "task": {
      "id": "uuid-string",
      "title": "Task title",
      "description": "Task description",
      "completed": true,
      "userId": "user-uuid-string",
      "createdAt": "2023-01-01T00:00:00Z",
      "updatedAt": "2023-01-02T00:00:00Z"
    }
  }
}
```

#### DELETE /tasks/{id}
Delete a task.

##### Response (204 No Content)
Task successfully deleted.

##### Not Found (404)
- Task does not exist or does not belong to user

## Error Codes

| Code | HTTP Status | Description |
|------|-------------|-------------|
| AUTH_001 | 401 | Invalid or expired token |
| AUTH_002 | 401 | Missing token |
| AUTH_003 | 400 | Invalid credentials |
| AUTH_004 | 409 | Email already exists |
| VALIDATION_001 | 400 | Validation error |
| RESOURCE_001 | 404 | Resource not found |
| PERMISSION_001 | 403 | Insufficient permissions |